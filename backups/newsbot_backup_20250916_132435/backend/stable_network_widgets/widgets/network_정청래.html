
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>정청래 연결성 네트워크</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8f9fa;
            padding: 20px;
            overflow-x: auto;
        }
        
        .network-container {
            width: 100%;
            height: 600px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .network-svg {
            width: 100%;
            height: 100%;
        }
        
        .node {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .node:hover {
            transform: scale(1.1);
        }
        
        .node-center {
            fill: #FFD700;
            stroke: #3498db;
            stroke-width: 3;
        }
        
        .node-level1 {
            fill: #ecf0f1;
            stroke: #bdc3c7;
            stroke-width: 2;
        }
        
        .node-level2 {
            fill: #f8f9fa;
            stroke: #95a5a6;
            stroke-width: 1.5;
        }
        
        .node-level3 {
            fill: #ffffff;
            stroke: #7f8c8d;
            stroke-width: 1;
        }
        
        .node-text {
            font-family: 'SF Pro Display', -apple-system, sans-serif;
            font-size: 12px;
            font-weight: 500;
            text-anchor: middle;
            dominant-baseline: central;
            pointer-events: none;
        }
        
        .node-center .node-text {
            font-size: 14px;
            font-weight: 600;
            fill: #2c3e50;
        }
        
        .node-level1 .node-text {
            font-size: 12px;
            fill: #2c3e50;
        }
        
        .node-level2 .node-text {
            font-size: 11px;
            fill: #7f8c8d;
        }
        
        .node-level3 .node-text {
            font-size: 10px;
            fill: #95a5a6;
        }
        
        .edge {
            stroke: #bdc3c7;
            stroke-width: 2;
            fill: none;
            opacity: 0.7;
        }
        
        .edge:hover {
            opacity: 1;
            stroke-width: 3;
        }
        
        .tooltip {
            position: absolute;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px;
            border-radius: 8px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            max-width: 200px;
            font-family: 'SF Pro Display', -apple-system, sans-serif;
        }
        
        .legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 11px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        
        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="network-container">
        <svg class="network-svg" id="networkSvg">
            <!-- 네트워크 노드와 엣지가 여기에 동적으로 생성됩니다 -->
        </svg>
        
        <div class="tooltip" id="tooltip" style="display: none;"></div>
        
        <div class="legend">
            <h4 style="margin-bottom: 10px; color: #2c3e50;">연결 유형</h4>
            <div class="legend-item">
                <div class="legend-color" style="background: #FF6B6B;"></div>
                <span>입법 연결</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #4ECDC4;"></div>
                <span>위원회 연결</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #45B7D1;"></div>
                <span>정치적 연결</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #96CEB4;"></div>
                <span>지역 연결</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #FFEAA7;"></div>
                <span>정책 연결</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #DDA0DD;"></div>
                <span>시간 연결</span>
            </div>
        </div>
    </div>
    
    <script>
        // 정치인 데이터
        const politicianData = {
  "name": "정청래",
  "party": "더불어민주당",
  "district": "서울 마포구을",
  "committee": "기획재정위원회",
  "connectivity_score": 85.5,
  "connections": [
    {
      "name": "김영배",
      "type": "정치적_연결",
      "strength": 0.9,
      "description": "같은 정당",
      "level": 1
    },
    {
      "name": "박수현",
      "type": "위원회_연결",
      "strength": 0.8,
      "description": "같은 위원회",
      "level": 1
    },
    {
      "name": "이재정",
      "type": "입법_연결",
      "strength": 0.7,
      "description": "공동발의",
      "level": 1
    },
    {
      "name": "최민호",
      "type": "지역_연결",
      "strength": 0.6,
      "description": "같은 지역구",
      "level": 1
    },
    {
      "name": "서지영",
      "type": "정책_연결",
      "strength": 0.5,
      "description": "유사 정책",
      "level": 1
    },
    {
      "name": "권영세",
      "type": "시간_연결",
      "strength": 0.4,
      "description": "동시기 활동",
      "level": 1
    },
    {
      "name": "김태호",
      "type": "정치적_연결",
      "strength": 0.3,
      "description": "김영배와 연결",
      "level": 2,
      "parent": "김영배"
    },
    {
      "name": "박민수",
      "type": "위원회_연결",
      "strength": 0.3,
      "description": "박수현과 연결",
      "level": 2,
      "parent": "박수현"
    },
    {
      "name": "이수진",
      "type": "입법_연결",
      "strength": 0.2,
      "description": "이재정과 연결",
      "level": 2,
      "parent": "이재정"
    },
    {
      "name": "최영희",
      "type": "정치적_연결",
      "strength": 0.1,
      "description": "김태호와 연결",
      "level": 3,
      "parent": "김태호"
    },
    {
      "name": "정수진",
      "type": "위원회_연결",
      "strength": 0.1,
      "description": "박민수와 연결",
      "level": 3,
      "parent": "박민수"
    }
  ]
};
        
        // 네트워크 생성
        function createNetwork() {
            const svg = document.getElementById('networkSvg');
            const tooltip = document.getElementById('tooltip');
            
            // SVG 크기 설정
            const container = document.querySelector('.network-container');
            const width = container.clientWidth;
            const height = container.clientHeight;
            
            svg.setAttribute('width', width);
            svg.setAttribute('height', height);
            
            // 중심 노드 위치
            const centerX = width / 2;
            const centerY = height / 2;
            
            // 노드와 엣지 생성
            const nodes = [];
            const edges = [];
            
            // 중심 노드 추가
            nodes.push({
                id: politicianData.name,
                x: centerX,
                y: centerY,
                level: 0,
                type: 'center',
                data: politicianData
            });
            
            // 1단계 연결 노드들 (원형 배치)
            const level1Connections = politicianData.connections.filter(conn => conn.level === 1);
            const level1Radius = 150;
            
            level1Connections.forEach((conn, index) => {
                const angle = (2 * Math.PI * index) / level1Connections.length;
                const x = centerX + level1Radius * Math.cos(angle);
                const y = centerY + level1Radius * Math.sin(angle);
                
                nodes.push({
                    id: conn.name,
                    x: x,
                    y: y,
                    level: 1,
                    type: conn.type,
                    data: conn
                });
                
                // 중심 노드와 연결
                edges.push({
                    from: politicianData.name,
                    to: conn.name,
                    type: conn.type,
                    strength: conn.strength
                });
            });
            
            // 2단계 연결 노드들
            const level2Connections = politicianData.connections.filter(conn => conn.level === 2);
            level2Connections.forEach((conn, index) => {
                const parentNode = nodes.find(node => node.id === conn.parent);
                if (parentNode) {
                    const angle = Math.random() * 2 * Math.PI;
                    const distance = 100;
                    const x = parentNode.x + distance * Math.cos(angle);
                    const y = parentNode.y + distance * Math.sin(angle);
                    
                    nodes.push({
                        id: conn.name,
                        x: x,
                        y: y,
                        level: 2,
                        type: conn.type,
                        data: conn
                    });
                    
                    // 부모 노드와 연결
                    edges.push({
                        from: conn.parent,
                        to: conn.name,
                        type: conn.type,
                        strength: conn.strength
                    });
                }
            });
            
            // 3단계 연결 노드들
            const level3Connections = politicianData.connections.filter(conn => conn.level === 3);
            level3Connections.forEach((conn, index) => {
                const parentNode = nodes.find(node => node.id === conn.parent);
                if (parentNode) {
                    const angle = Math.random() * 2 * Math.PI;
                    const distance = 80;
                    const x = parentNode.x + distance * Math.cos(angle);
                    const y = parentNode.y + distance * Math.sin(angle);
                    
                    nodes.push({
                        id: conn.name,
                        x: x,
                        y: y,
                        level: 3,
                        type: conn.type,
                        data: conn
                    });
                    
                    // 부모 노드와 연결
                    edges.push({
                        from: conn.parent,
                        to: conn.name,
                        type: conn.type,
                        strength: conn.strength
                    });
                }
            });
            
            // SVG에 노드와 엣지 그리기
            drawNetwork(svg, nodes, edges, tooltip);
        }
        
        function drawNetwork(svg, nodes, edges, tooltip) {
            // 기존 내용 지우기
            svg.innerHTML = '';
            
            // 엣지 그리기
            edges.forEach(edge => {
                const fromNode = nodes.find(n => n.id === edge.from);
                const toNode = nodes.find(n => n.id === edge.to);
                
                if (fromNode && toNode) {
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', fromNode.x);
                    line.setAttribute('y1', fromNode.y);
                    line.setAttribute('x2', toNode.x);
                    line.setAttribute('y2', toNode.y);
                    line.setAttribute('class', 'edge');
                    line.setAttribute('stroke', getConnectionColor(edge.type));
                    line.setAttribute('stroke-width', Math.max(1, edge.strength * 4));
                    
                    svg.appendChild(line);
                }
            });
            
            // 노드 그리기
            nodes.forEach(node => {
                const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');
                group.setAttribute('class', 'node');
                group.setAttribute('transform', `translate(${node.x}, ${node.y})`);
                
                // 노드 원 그리기
                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('r', getNodeRadius(node.level));
                circle.setAttribute('class', `node-level${node.level}`);
                
                if (node.level === 0) {
                    circle.setAttribute('fill', '#FFD700');
                    circle.setAttribute('stroke', '#3498db');
                    circle.setAttribute('stroke-width', '3');
                } else {
                    circle.setAttribute('fill', '#ecf0f1');
                    circle.setAttribute('stroke', getConnectionColor(node.type));
                    circle.setAttribute('stroke-width', '2');
                }
                
                // 노드 텍스트
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('class', 'node-text');
                text.textContent = node.id;
                
                // 이벤트 리스너
                group.addEventListener('mouseenter', (e) => {
                    showTooltip(e, node, tooltip);
                });
                
                group.addEventListener('mouseleave', () => {
                    hideTooltip(tooltip);
                });
                
                group.appendChild(circle);
                group.appendChild(text);
                svg.appendChild(group);
            });
        }
        
        function getNodeRadius(level) {
            switch(level) {
                case 0: return 25;
                case 1: return 20;
                case 2: return 15;
                case 3: return 12;
                default: return 10;
            }
        }
        
        function getConnectionColor(type) {
            const colors = {
                '입법_연결': '#FF6B6B',
                '위원회_연결': '#4ECDC4',
                '정치적_연결': '#45B7D1',
                '지역_연결': '#96CEB4',
                '정책_연결': '#FFEAA7',
                '시간_연결': '#DDA0DD'
            };
            return colors[type] || '#bdc3c7';
        }
        
        function showTooltip(event, node, tooltip) {
            const data = node.data;
            let content = '';
            
            if (node.level === 0) {
                content = `
                    <div style="font-weight: 600; margin-bottom: 5px;">${data.name}</div>
                    <div>${data.party}</div>
                    <div>${data.district}</div>
                    <div>${data.committee}</div>
                    <div style="color: #e74c3c; font-weight: 600; margin-top: 5px;">
                        연결성 점수: ${data.connectivity_score}점
                    </div>
                `;
            } else {
                content = `
                    <div style="font-weight: 600; margin-bottom: 5px;">${data.name}</div>
                    <div>연결 유형: ${data.type}</div>
                    <div>설명: ${data.description}</div>
                    <div style="color: ${getConnectionColor(data.type)}; font-weight: 600; margin-top: 5px;">
                        연결 강도: ${data.strength.toFixed(1)}
                    </div>
                `;
            }
            
            tooltip.innerHTML = content;
            tooltip.style.display = 'block';
            tooltip.style.left = event.pageX + 10 + 'px';
            tooltip.style.top = event.pageY - 10 + 'px';
        }
        
        function hideTooltip(tooltip) {
            tooltip.style.display = 'none';
        }
        
        // 페이지 로드 시 네트워크 생성
        window.addEventListener('load', createNetwork);
        window.addEventListener('resize', createNetwork);
    </script>
</body>
</html>
