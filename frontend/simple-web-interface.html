<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NewsBot ì •ì„¸ë¶„ì„ | ë§¤ë‹ˆí˜ìŠ¤í†  ê²€ì¦ ì„œë¹„ìŠ¤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .loading {
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- í—¤ë” -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-4">
                    <h1 class="text-xl font-bold text-gray-800">
                        ğŸ—³ï¸ NewsBot ë§¤ë‹ˆí˜ìŠ¤í†  ê²€ì¦ ì„œë¹„ìŠ¤
                    </h1>
                    <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">
                        8íšŒ ì§€ë°©ì„ ê±°
                    </span>
                </div>
                <div class="text-sm text-gray-500">
                    7ëª… í›„ë³´ì Â· 14ê°œ ê³µì•½ ê²€ì¦
                </div>
            </div>
        </div>
    </header>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- ì„œë¹„ìŠ¤ ì†Œê°œ -->
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-4">
                ë§¤ë‹ˆí˜ìŠ¤í†  ê²€ì¦ ì„œë¹„ìŠ¤
            </h1>
            <p class="text-lg text-gray-600 mb-6 max-w-3xl mx-auto">
                8íšŒ ì „êµ­ë™ì‹œì§€ë°©ì„ ê±° ì¶œë§ˆìë“¤ì˜ ê³µì•½ì„ í…ìŠ¤íŠ¸ë§ˆì´ë‹ ê¸°ìˆ ë¡œ ë¶„ì„í•˜ì—¬ 
                ê°ê´€ì ì´ê³  íˆ¬ëª…í•œ ê²€ì¦ ê²°ê³¼ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
            </p>
        </div>

        <!-- ê²€ì¦ ê²°ê³¼ ìš”ì•½ -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8">
            <h2 class="text-xl font-bold text-gray-900 mb-4">ğŸ“Š ê²€ì¦ ê²°ê³¼ ìš”ì•½</h2>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <div class="bg-blue-50 rounded-lg p-4 text-center">
                    <div class="text-2xl font-bold text-blue-600">7ëª…</div>
                    <div class="text-sm text-blue-800">ê²€ì¦ ì™„ë£Œ í›„ë³´ì</div>
                </div>
                <div class="bg-green-50 rounded-lg p-4 text-center">
                    <div class="text-2xl font-bold text-green-600">71.4%</div>
                    <div class="text-sm text-green-800">í‰ê·  ê²€ì¦ë¥ </div>
                </div>
                <div class="bg-purple-50 rounded-lg p-4 text-center">
                    <div class="text-2xl font-bold text-purple-600">85.4ì </div>
                    <div class="text-sm text-purple-800">í‰ê·  ì‹ ë¢°ë„</div>
                </div>
                <div class="bg-orange-50 rounded-lg p-4 text-center">
                    <div class="text-2xl font-bold text-orange-600">32.1%</div>
                    <div class="text-sm text-orange-800">í‰ê·  ì‹¤í˜„í™•ë¥ </div>
                </div>
            </div>
        </div>

        <!-- êµ­íšŒì˜ì› ê²€ìƒ‰ -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8">
            <h2 class="text-xl font-bold text-gray-900 mb-4">ğŸ” êµ­íšŒì˜ì› ê²€ìƒ‰</h2>
            <div class="flex space-x-4 mb-4">
                <input 
                    type="text" 
                    id="searchInput" 
                    placeholder="êµ­íšŒì˜ì› ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì´ì¬ëª…, ê¹€ê¸°í˜„)"
                    class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                />
                <button 
                    onclick="searchPolitician()" 
                    class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
                >
                    ê²€ìƒ‰
                </button>
            </div>
            <div id="searchResults" class="mt-4"></div>
        </div>

        <!-- í›„ë³´ìë³„ ê²€ì¦ ê²°ê³¼ -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8">
            <h2 class="text-xl font-bold text-gray-900 mb-4">ğŸ† í›„ë³´ìë³„ ê²€ì¦ ê²°ê³¼</h2>
            <div id="candidateResults" class="space-y-4">
                <!-- ë™ì ìœ¼ë¡œ ë¡œë“œë¨ -->
            </div>
        </div>

        <!-- ê²€ì¦ ê¸°ì¤€ ì„¤ëª… -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">âš–ï¸ ê²€ì¦ ê¸°ì¤€</h3>
                <ul class="space-y-2 text-sm text-gray-600">
                    <li>â€¢ <strong>êµ¬ì²´ì„± (30%):</strong> ì˜ˆì‚°, ì¼ì •, ë°©ë²• ëª…ì‹œ</li>
                    <li>â€¢ <strong>ì‹¤í˜„ê°€ëŠ¥ì„± (40%):</strong> ê¶Œí•œ ë²”ìœ„, ì˜ˆì‚° í˜„ì‹¤ì„±</li>
                    <li>â€¢ <strong>ì¼ê´€ì„± (30%):</strong> ê³µì•½ ê°„ ëª¨ìˆœ ì—¬ë¶€</li>
                    <li>â€¢ <strong>ì‹ ë¢°ë„:</strong> ìœ„ 3ìš”ì†Œì˜ ê°€ì¤‘í‰ê· </li>
                </ul>
            </div>

            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">ğŸ“ˆ ë“±ê¸‰ ì²´ê³„</h3>
                <ul class="space-y-2 text-sm text-gray-600">
                    <li>â€¢ <strong>A+ (90ì  ì´ìƒ):</strong> ë§¤ìš° ìš°ìˆ˜</li>
                    <li>â€¢ <strong>A (85-89ì ):</strong> ìš°ìˆ˜</li>
                    <li>â€¢ <strong>A- (80-84ì ):</strong> ì–‘í˜¸</li>
                    <li>â€¢ <strong>B+ (75-79ì ):</strong> ë³´í†µ</li>
                    <li>â€¢ <strong>B ì´í•˜:</strong> ê°œì„  í•„ìš”</li>
                </ul>
            </div>
        </div>
    </main>

    <!-- í‘¸í„° -->
    <footer class="bg-white border-t border-gray-200 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center text-sm text-gray-500">
                <p>Â© 2024 NewsBot ë§¤ë‹ˆí˜ìŠ¤í†  ê²€ì¦ ì„œë¹„ìŠ¤. íˆ¬ëª…í•˜ê³  ê°ê´€ì ì¸ ì •ì¹˜ ê³µì•½ ë¶„ì„ í”Œë«í¼.</p>
            </div>
        </div>
    </footer>

    <script>
        // ìƒ˜í”Œ ê²€ì¦ ê²°ê³¼ ë°ì´í„°
        const verificationResults = [
            {
                name: "ì˜¤ì„¸í›ˆ",
                party: "êµ­ë¯¼ì˜í˜",
                region: "ì„œìš¸íŠ¹ë³„ì‹œ",
                position: "ê´‘ì—­ë‹¨ì²´ì¥",
                grade: "A+",
                credibility_score: 88.5,
                pledges: [
                    {
                        title: "ì²­ë…„ì£¼íƒ 10ë§Œí˜¸ ê³µê¸‰",
                        category: "ì£¼ê±°ì •ì±…",
                        specificity: 85,
                        feasibility: 80,
                        status: "ê²€ì¦ì™„ë£Œ"
                    },
                    {
                        title: "ì‹¬ì•¼ ëŒ€ì¤‘êµí†µ í™•ëŒ€", 
                        category: "êµí†µì •ì±…",
                        specificity: 75,
                        feasibility: 90,
                        status: "ê²€ì¦ì™„ë£Œ"
                    }
                ]
            },
            {
                name: "ê¹€ë³‘ê´€",
                party: "ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹", 
                region: "ì„±ë‚¨ì‹œ",
                position: "ê¸°ì´ˆë‹¨ì²´ì¥",
                grade: "A+",
                credibility_score: 87.2,
                pledges: [
                    {
                        title: "ì„±ë‚¨ì‹œë¯¼ ê¸°ë³¸ì†Œë“ í™•ëŒ€",
                        category: "ë³µì§€ì •ì±…",
                        specificity: 90,
                        feasibility: 60,
                        status: "ë¶€ë¶„ê²€ì¦"
                    }
                ]
            },
            {
                name: "ê¹€ë™ì—°",
                party: "ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹",
                region: "ê²½ê¸°ë„", 
                position: "ê´‘ì—­ë‹¨ì²´ì¥",
                grade: "A",
                credibility_score: 85.1,
                pledges: [
                    {
                        title: "ê¸°ë³¸ì£¼íƒ 100ë§Œí˜¸ ê³µê¸‰",
                        category: "ì£¼ê±°ì •ì±…",
                        specificity: 80,
                        feasibility: 70,
                        status: "ê²€ì¦ì™„ë£Œ"
                    }
                ]
            }
        ];

        // êµ­íšŒì˜ì› ê²€ìƒ‰ í•¨ìˆ˜
        async function searchPolitician() {
            const searchTerm = document.getElementById('searchInput').value;
            const resultsDiv = document.getElementById('searchResults');
            
            if (!searchTerm.trim()) {
                resultsDiv.innerHTML = '<p class="text-gray-500">ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>';
                return;
            }
            
            resultsDiv.innerHTML = '<div class="loading w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full"></div>';
            
            try {
                const response = await fetch(`http://localhost:8000/api/assembly/members/${encodeURIComponent(searchTerm)}`);
                const data = await response.json();
                
                if (data.success) {
                    resultsDiv.innerHTML = `
                        <div class="bg-blue-50 rounded-lg p-4">
                            <h4 class="font-semibold text-blue-900">${data.data.name}</h4>
                            <p class="text-sm text-blue-700">ì •ë‹¹: ${data.data.party}</p>
                            <p class="text-sm text-blue-700">ì§€ì—­êµ¬: ${data.data.district}</p>
                            <p class="text-sm text-blue-700">ìœ„ì›íšŒ: ${data.data.committee}</p>
                        </div>
                    `;
                } else {
                    resultsDiv.innerHTML = '<p class="text-red-500">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                }
            } catch (error) {
                resultsDiv.innerHTML = '<p class="text-red-500">ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>';
                console.error('ê²€ìƒ‰ ì˜¤ë¥˜:', error);
            }
        }

        // ê²€ì¦ ê²°ê³¼ ë Œë”ë§
        function renderVerificationResults() {
            const container = document.getElementById('candidateResults');
            
            const gradeColors = {
                'A+': 'bg-green-100 text-green-800',
                'A': 'bg-blue-100 text-blue-800', 
                'A-': 'bg-purple-100 text-purple-800',
                'B+': 'bg-yellow-100 text-yellow-800',
                'B': 'bg-orange-100 text-orange-800'
            };

            const statusColors = {
                'ê²€ì¦ì™„ë£Œ': 'bg-green-100 text-green-800',
                'ë¶€ë¶„ê²€ì¦': 'bg-yellow-100 text-yellow-800',
                'ë¯¸ê²€ì¦': 'bg-red-100 text-red-800'
            };
            
            container.innerHTML = verificationResults.map(candidate => `
                <div class="border border-gray-200 rounded-lg p-4">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center space-x-3">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900">${candidate.name}</h3>
                                <p class="text-sm text-gray-500">${candidate.party} Â· ${candidate.region} Â· ${candidate.position}</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="px-3 py-1 rounded-full text-sm font-medium ${gradeColors[candidate.grade] || 'bg-gray-100 text-gray-800'}">
                                ${candidate.grade}
                            </span>
                            <span class="text-sm text-gray-600">${candidate.credibility_score}ì </span>
                        </div>
                    </div>
                    
                    <div class="space-y-2">
                        ${candidate.pledges.map(pledge => `
                            <div class="bg-gray-50 rounded p-3">
                                <div class="flex items-center justify-between mb-2">
                                    <h4 class="font-medium text-gray-900 text-sm">${pledge.title}</h4>
                                    <span class="px-2 py-1 rounded text-xs font-medium ${statusColors[pledge.status] || 'bg-gray-100 text-gray-800'}">
                                        ${pledge.status}
                                    </span>
                                </div>
                                <div class="grid grid-cols-3 gap-2 text-xs">
                                    <div class="text-center">
                                        <div class="font-semibold text-blue-600">${pledge.specificity}ì </div>
                                        <div class="text-gray-500">êµ¬ì²´ì„±</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="font-semibold text-green-600">${pledge.feasibility}ì </div>
                                        <div class="text-gray-500">ì‹¤í˜„ê°€ëŠ¥ì„±</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="font-semibold text-purple-600">${pledge.category}</div>
                                        <div class="text-gray-500">ë¶„ì•¼</div>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        // ì „ì²´ êµ­íšŒì˜ì› ëª©ë¡ ë¡œë“œ
        async function loadAllMembers() {
            try {
                const response = await fetch('http://localhost:8000/api/assembly/members');
                const data = await response.json();
                
                if (data.success) {
                    const membersContainer = document.createElement('div');
                    membersContainer.className = 'mt-8';
                    membersContainer.innerHTML = `
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">ğŸ“‹ êµ­íšŒì˜ì› ëª©ë¡ (${data.total_count}ëª…)</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                                ${data.data.map(member => `
                                    <div class="border border-gray-200 rounded p-3 hover:bg-gray-50 cursor-pointer" onclick="selectMember('${member.name}')">
                                        <div class="font-medium text-gray-900">${member.name}</div>
                                        <div class="text-sm text-gray-500">${member.party}</div>
                                        <div class="text-xs text-gray-400">${member.district}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                    
                    document.querySelector('main').appendChild(membersContainer);
                }
            } catch (error) {
                console.error('êµ­íšŒì˜ì› ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }

        // ì˜ì› ì„ íƒ í•¨ìˆ˜
        function selectMember(memberName) {
            document.getElementById('searchInput').value = memberName;
            searchPolitician();
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            renderVerificationResults();
            loadAllMembers();
        });

        // Enter í‚¤ ê²€ìƒ‰
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Enter' && document.activeElement.id === 'searchInput') {
                searchPolitician();
            }
        });
    </script>
</body>
</html>
