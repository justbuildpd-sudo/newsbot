<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìœ¡ê°í˜• ê·¸ë¦¬ë“œ ì§€ë„ í…ŒìŠ¤íŠ¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hex-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(30px, 1fr));
            gap: 2px;
        }
        .hex {
            width: 30px;
            height: 26px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .hex:hover {
            transform: scale(1.1);
            z-index: 10;
        }
        .hex-inner {
            width: 100%;
            height: 100%;
            position: relative;
            transform: rotateY(0deg) rotateZ(30deg);
            transition: all 0.3s ease;
        }
        .hex-inner:before,
        .hex-inner:after {
            content: '';
            position: absolute;
            width: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
        }
        .hex-inner:before {
            bottom: 100%;
            border-bottom: 7.5px solid;
        }
        .hex-inner:after {
            top: 100%;
            border-top: 7.5px solid;
        }
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            white-space: nowrap;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold text-center mb-8 text-gray-800">
            ğŸ—ºï¸ ìœ¡ê°í˜• ê·¸ë¦¬ë“œ ì„ ê±°êµ¬ ì§€ë„ í…ŒìŠ¤íŠ¸
        </h1>
        
        <!-- ê²€ìƒ‰ ë°” -->
        <div class="max-w-md mx-auto mb-8">
            <div class="relative">
                <input 
                    type="text" 
                    id="searchInput"
                    placeholder="ì •ì¹˜ì¸ëª…, ì„ ê±°êµ¬ëª…, ì •ë‹¹ëª…ìœ¼ë¡œ ê²€ìƒ‰..."
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                >
                <button onclick="searchPoliticians()" class="absolute right-2 top-2 text-gray-400 hover:text-blue-500">
                    ğŸ”
                </button>
            </div>
            <div id="searchResults" class="mt-2 bg-white rounded-lg shadow-md hidden"></div>
        </div>

        <!-- í†µê³„ ì •ë³´ -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
            <div class="bg-white rounded-lg shadow-md p-6 text-center">
                <div class="text-2xl font-bold text-blue-600" id="totalPoliticians">300</div>
                <div class="text-sm text-gray-600">ì´ ì˜ì›</div>
            </div>
            <div class="bg-white rounded-lg shadow-md p-6 text-center">
                <div class="text-2xl font-bold text-green-600" id="totalDistricts">253</div>
                <div class="text-sm text-gray-600">ì„ ê±°êµ¬</div>
            </div>
            <div class="bg-white rounded-lg shadow-md p-6 text-center">
                <div class="text-2xl font-bold text-purple-600" id="totalParties">8</div>
                <div class="text-sm text-gray-600">ì •ë‹¹</div>
            </div>
            <div class="bg-white rounded-lg shadow-md p-6 text-center">
                <div class="text-2xl font-bold text-orange-600" id="selectedCount">0</div>
                <div class="text-sm text-gray-600">ì„ íƒë¨</div>
            </div>
        </div>

        <!-- ì§€ë„ ì˜ì—­ -->
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <div class="lg:col-span-3">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-semibold mb-4">ì„ ê±°êµ¬ ì§€ë„</h2>
                    
                    <!-- SVG ê¸°ë°˜ ìœ¡ê°í˜• ê·¸ë¦¬ë“œ ì§€ë„ -->
                    <div class="relative">
                        <svg id="mapSvg" viewBox="0 0 800 600" class="w-full h-96 border border-gray-200 rounded-lg bg-gray-50">
                            <!-- ì„œìš¸íŠ¹ë³„ì‹œ ì˜ì—­ -->
                            <g id="seoul-region">
                                <text x="200" y="30" text-anchor="middle" class="text-sm font-bold fill-gray-700">ì„œìš¸íŠ¹ë³„ì‹œ</text>
                                <!-- ì„œìš¸ ì„ ê±°êµ¬ë“¤ (25ê°œ) -->
                            </g>
                            
                            <!-- ë¶€ì‚°ê´‘ì—­ì‹œ ì˜ì—­ -->
                            <g id="busan-region">
                                <text x="650" y="450" text-anchor="middle" class="text-sm font-bold fill-gray-700">ë¶€ì‚°ê´‘ì—­ì‹œ</text>
                                <!-- ë¶€ì‚° ì„ ê±°êµ¬ë“¤ (18ê°œ) -->
                            </g>
                            
                            <!-- ê²½ê¸°ë„ ì˜ì—­ -->
                            <g id="gyeonggi-region">
                                <text x="400" y="200" text-anchor="middle" class="text-sm font-bold fill-gray-700">ê²½ê¸°ë„</text>
                                <!-- ê²½ê¸°ë„ ì„ ê±°êµ¬ë“¤ (60ê°œ) -->
                            </g>
                            
                            <!-- ë²”ë¡€ -->
                            <g id="legend" transform="translate(600, 50)">
                                <rect x="0" y="0" width="180" height="120" fill="white" stroke="#ccc" stroke-width="1" rx="5"/>
                                <text x="90" y="15" text-anchor="middle" class="text-sm font-bold">ì •ë‹¹ë³„ ìƒ‰ìƒ</text>
                                
                                <circle cx="15" cy="30" r="8" fill="#E53E3E"/>
                                <text x="30" y="35" class="text-xs">êµ­ë¯¼ì˜í˜</text>
                                
                                <circle cx="15" cy="50" r="8" fill="#3182CE"/>
                                <text x="30" y="55" class="text-xs">ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹</text>
                                
                                <circle cx="15" cy="70" r="8" fill="#D69E2E"/>
                                <text x="30" y="75" class="text-xs">ì •ì˜ë‹¹</text>
                                
                                <circle cx="15" cy="90" r="8" fill="#38A169"/>
                                <text x="30" y="95" class="text-xs">êµ­ë¯¼ì˜ë‹¹</text>
                                
                                <circle cx="15" cy="110" r="8" fill="#6B7280"/>
                                <text x="30" y="115" class="text-xs">ê¸°íƒ€</text>
                            </g>
                        </svg>
                        
                        <!-- íˆ´íŒ -->
                        <div id="tooltip" class="tooltip hidden"></div>
                    </div>
                </div>
            </div>

            <!-- ì‚¬ì´ë“œë°” -->
            <div class="lg:col-span-1">
                <div class="space-y-6">
                    <!-- ì„ íƒëœ ì„ ê±°êµ¬ ì •ë³´ -->
                    <div id="selectedDistrictInfo" class="bg-white rounded-lg shadow-md p-6 hidden">
                        <h3 class="text-lg font-semibold mb-4">ì„ íƒëœ ì„ ê±°êµ¬</h3>
                        <div id="districtDetails"></div>
                    </div>

                    <!-- ì‚¬ìš©ë²• ì•ˆë‚´ -->
                    <div class="bg-blue-50 rounded-lg p-6">
                        <h3 class="text-lg font-semibold text-blue-900 mb-4">ì‚¬ìš© ë°©ë²•</h3>
                        <div class="space-y-2 text-sm text-blue-800">
                            <div class="flex items-start">
                                <span class="mr-2">ğŸ”</span>
                                <span>ê²€ìƒ‰ì°½ì—ì„œ ì •ì¹˜ì¸, ì •ë‹¹, ì„ ê±°êµ¬ëª…ìœ¼ë¡œ ê²€ìƒ‰</span>
                            </div>
                            <div class="flex items-start">
                                <span class="mr-2">ğŸ—ºï¸</span>
                                <span>ì§€ë„ì˜ ìœ¡ê°í˜•ì„ í´ë¦­í•˜ì—¬ í•´ë‹¹ ì§€ì—­ ì˜ì› í™•ì¸</span>
                            </div>
                            <div class="flex items-start">
                                <span class="mr-2">ğŸ‘¤</span>
                                <span>ì˜ì› ì´ë¦„ì„ í´ë¦­í•˜ë©´ ìƒì„¸ ì •ë³´ ì¡°íšŒ</span>
                            </div>
                            <div class="flex items-start">
                                <span class="mr-2">ğŸ¨</span>
                                <span>ìƒ‰ìƒì€ ì •ë‹¹ë³„ë¡œ êµ¬ë¶„ë˜ì–´ í‘œì‹œ</span>
                            </div>
                        </div>
                    </div>

                    <!-- ì‹œìŠ¤í…œ ì •ë³´ -->
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h3 class="text-lg font-semibold mb-4">ì‹œìŠ¤í…œ ì •ë³´</h3>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600">ì§€ë„ ìœ í˜•:</span>
                                <span class="font-medium">ìœ¡ê°í˜• ê·¸ë¦¬ë“œ</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">ë°ì´í„° ì—…ë°ì´íŠ¸:</span>
                                <span class="font-medium" id="lastUpdate"></span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">ê²€ìƒ‰ ì§€ì›:</span>
                                <span class="font-medium text-green-600">í™œì„±í™”</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì •ì¹˜ì¸ ìƒì„¸ ëª¨ë‹¬ -->
        <div id="politicianModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50 p-4">
            <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden shadow-2xl">
                <div class="bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 relative">
                    <button onclick="closeModal()" class="absolute top-4 right-4 text-white hover:text-gray-200 text-2xl font-bold">Ã—</button>
                    <div id="modalContent"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ìƒ˜í”Œ ì •ì¹˜ì¸ ë°ì´í„°
        const samplePoliticians = [
            {
                name: 'ê¹€ì² ìˆ˜',
                party: 'ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹',
                district: 'ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ê°‘',
                region: 'ì„œìš¸íŠ¹ë³„ì‹œ',
                phone: '02-788-1234',
                email: 'kim@assembly.go.kr',
                office: 'êµ­íšŒì˜ì‚¬ë‹¹ ë³¸ê´€ 123í˜¸'
            },
            {
                name: 'ì´ì˜í¬',
                party: 'êµ­ë¯¼ì˜í˜',
                district: 'ë¶€ì‚°ê´‘ì—­ì‹œ í•´ìš´ëŒ€êµ¬ì„',
                region: 'ë¶€ì‚°ê´‘ì—­ì‹œ',
                phone: '051-123-4567',
                email: 'lee@assembly.go.kr',
                office: 'êµ­íšŒì˜ì‚¬ë‹¹ ë³¸ê´€ 456í˜¸'
            },
            {
                name: 'ë°•ë¯¼ìˆ˜',
                party: 'ì •ì˜ë‹¹',
                district: 'ê²½ê¸°ë„ ìˆ˜ì›ì‹œê°‘',
                region: 'ê²½ê¸°ë„',
                phone: '031-234-5678',
                email: 'park@assembly.go.kr',
                office: 'êµ­íšŒì˜ì‚¬ë‹¹ ë³¸ê´€ 789í˜¸'
            },
            {
                name: 'ìµœì§€ì˜',
                party: 'êµ­ë¯¼ì˜ë‹¹',
                district: 'ì¸ì²œê´‘ì—­ì‹œ ë‚¨ë™êµ¬ê°‘',
                region: 'ì¸ì²œê´‘ì—­ì‹œ',
                phone: '032-345-6789',
                email: 'choi@assembly.go.kr',
                office: 'êµ­íšŒì˜ì‚¬ë‹¹ ë³¸ê´€ 321í˜¸'
            },
            {
                name: 'ì •í•œêµ­',
                party: 'ê°œí˜ì‹ ë‹¹',
                district: 'ëŒ€êµ¬ê´‘ì—­ì‹œ ì¤‘êµ¬ë‚¨êµ¬',
                region: 'ëŒ€êµ¬ê´‘ì—­ì‹œ',
                phone: '053-456-7890',
                email: 'jung@assembly.go.kr',
                office: 'êµ­íšŒì˜ì‚¬ë‹¹ ë³¸ê´€ 654í˜¸'
            }
        ];

        // ì •ë‹¹ë³„ ìƒ‰ìƒ
        const partyColors = {
            'êµ­ë¯¼ì˜í˜': '#E53E3E',
            'ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹': '#3182CE',
            'ì •ì˜ë‹¹': '#D69E2E',
            'êµ­ë¯¼ì˜ë‹¹': '#38A169',
            'ê°œí˜ì‹ ë‹¹': '#805AD5',
            'ê¸°íƒ€': '#6B7280'
        };

        // ìœ¡ê°í˜• ê·¸ë¦¬ë“œ ë°ì´í„°
        const hexGridData = [
            // ì„œìš¸íŠ¹ë³„ì‹œ
            { id: 'seoul_01', name: 'ì¢…ë¡œêµ¬', x: 150, y: 60, region: 'ì„œìš¸íŠ¹ë³„ì‹œ' },
            { id: 'seoul_02', name: 'ì¤‘êµ¬Â·ì„±ë™êµ¬ê°‘', x: 180, y: 60, region: 'ì„œìš¸íŠ¹ë³„ì‹œ' },
            { id: 'seoul_03', name: 'ì„±ë™êµ¬ì„', x: 210, y: 60, region: 'ì„œìš¸íŠ¹ë³„ì‹œ' },
            { id: 'seoul_04', name: 'ê´‘ì§„êµ¬ê°‘', x: 240, y: 60, region: 'ì„œìš¸íŠ¹ë³„ì‹œ' },
            { id: 'seoul_05', name: 'ê´‘ì§„êµ¬ì„', x: 270, y: 60, region: 'ì„œìš¸íŠ¹ë³„ì‹œ' },
            
            // ë¶€ì‚°ê´‘ì—­ì‹œ
            { id: 'busan_01', name: 'ì¤‘êµ¬Â·ì˜ë„êµ¬', x: 620, y: 420, region: 'ë¶€ì‚°ê´‘ì—­ì‹œ' },
            { id: 'busan_02', name: 'ì„œêµ¬Â·ë™êµ¬', x: 650, y: 420, region: 'ë¶€ì‚°ê´‘ì—­ì‹œ' },
            { id: 'busan_03', name: 'ë¶€ì‚°ì§„êµ¬ê°‘', x: 680, y: 420, region: 'ë¶€ì‚°ê´‘ì—­ì‹œ' },
            
            // ê²½ê¸°ë„
            { id: 'gyeonggi_01', name: 'ìˆ˜ì›ì‹œê°‘', x: 350, y: 180, region: 'ê²½ê¸°ë„' },
            { id: 'gyeonggi_02', name: 'ìˆ˜ì›ì‹œì„', x: 380, y: 180, region: 'ê²½ê¸°ë„' },
            { id: 'gyeonggi_03', name: 'ì„±ë‚¨ì‹œê°‘', x: 410, y: 180, region: 'ê²½ê¸°ë„' }
        ];

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initializeMap();
            updateLastUpdate();
        });

        function initializeMap() {
            const svg = document.getElementById('mapSvg');
            
            hexGridData.forEach(hex => {
                // ëœë¤í•˜ê²Œ ì •ì¹˜ì¸ í• ë‹¹
                const politician = samplePoliticians[Math.floor(Math.random() * samplePoliticians.length)];
                const color = partyColors[politician.party] || partyColors['ê¸°íƒ€'];
                
                // ìœ¡ê°í˜• ìƒì„±
                const hexGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
                hexGroup.setAttribute('class', 'hex-district');
                hexGroup.setAttribute('data-district', hex.id);
                hexGroup.setAttribute('data-politician', JSON.stringify(politician));
                
                // ìœ¡ê°í˜• íŒ¨ìŠ¤
                const hexPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                const hexPathData = `M ${hex.x} ${hex.y-15} L ${hex.x+13} ${hex.y-7.5} L ${hex.x+13} ${hex.y+7.5} L ${hex.x} ${hex.y+15} L ${hex.x-13} ${hex.y+7.5} L ${hex.x-13} ${hex.y-7.5} Z`;
                hexPath.setAttribute('d', hexPathData);
                hexPath.setAttribute('fill', color);
                hexPath.setAttribute('stroke', '#374151');
                hexPath.setAttribute('stroke-width', '1.5');
                hexPath.setAttribute('class', 'cursor-pointer transition-all duration-200 hover:opacity-80');
                
                // í…ìŠ¤íŠ¸ (ì„ ê±°êµ¬ëª…)
                const text1 = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text1.setAttribute('x', hex.x);
                text1.setAttribute('y', hex.y - 2);
                text1.setAttribute('text-anchor', 'middle');
                text1.setAttribute('class', 'text-xs font-bold fill-white pointer-events-none');
                text1.setAttribute('style', 'font-size: 8px;');
                text1.textContent = hex.name.length > 6 ? hex.name.substring(0, 6) + '...' : hex.name;
                
                // í…ìŠ¤íŠ¸ (ì •ì¹˜ì¸ëª…)
                const text2 = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text2.setAttribute('x', hex.x);
                text2.setAttribute('y', hex.y + 8);
                text2.setAttribute('text-anchor', 'middle');
                text2.setAttribute('class', 'text-xs fill-white pointer-events-none');
                text2.setAttribute('style', 'font-size: 7px;');
                text2.textContent = politician.name;
                
                hexGroup.appendChild(hexPath);
                hexGroup.appendChild(text1);
                hexGroup.appendChild(text2);
                
                // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
                hexGroup.addEventListener('click', () => selectDistrict(hex, politician));
                hexGroup.addEventListener('mouseenter', (e) => showTooltip(e, hex, politician));
                hexGroup.addEventListener('mouseleave', hideTooltip);
                
                svg.appendChild(hexGroup);
            });
        }

        function selectDistrict(hex, politician) {
            // ì„ íƒëœ ì„ ê±°êµ¬ ì •ë³´ í‘œì‹œ
            const infoDiv = document.getElementById('selectedDistrictInfo');
            const detailsDiv = document.getElementById('districtDetails');
            
            detailsDiv.innerHTML = `
                <div class="space-y-3">
                    <div><strong>ì„ ê±°êµ¬:</strong> ${hex.name}</div>
                    <div><strong>ì§€ì—­:</strong> ${hex.region}</div>
                    <div><strong>ì˜ì›:</strong> ${politician.name}</div>
                    <div><strong>ì •ë‹¹:</strong> ${politician.party}</div>
                    <button onclick="showPoliticianDetail('${politician.name}')" 
                            class="mt-3 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors">
                        ìƒì„¸ ì •ë³´ ë³´ê¸°
                    </button>
                </div>
            `;
            
            infoDiv.classList.remove('hidden');
            
            // ì„ íƒëœ ê°œìˆ˜ ì—…ë°ì´íŠ¸
            document.getElementById('selectedCount').textContent = '1';
        }

        function showTooltip(e, hex, politician) {
            const tooltip = document.getElementById('tooltip');
            tooltip.innerHTML = `
                <div><strong>${hex.name}</strong></div>
                <div>${politician.name} (${politician.party})</div>
            `;
            tooltip.style.left = e.pageX + 10 + 'px';
            tooltip.style.top = e.pageY - 10 + 'px';
            tooltip.classList.remove('hidden');
        }

        function hideTooltip() {
            document.getElementById('tooltip').classList.add('hidden');
        }

        function showPoliticianDetail(name) {
            const politician = samplePoliticians.find(p => p.name === name);
            if (!politician) return;
            
            const modalContent = document.getElementById('modalContent');
            modalContent.innerHTML = `
                <div class="flex items-start space-x-4">
                    <div class="w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                        <span class="text-2xl font-bold text-white">${politician.name.charAt(0)}</span>
                    </div>
                    <div class="flex-1">
                        <h2 class="text-xl font-bold mb-2">${politician.name}</h2>
                        <div class="space-y-1 text-sm">
                            <div>ğŸ›ï¸ ${politician.party}</div>
                            <div>ğŸ“ ${politician.district}</div>
                            <div>ğŸ“ ${politician.phone}</div>
                            <div>âœ‰ï¸ ${politician.email}</div>
                            <div>ğŸ¢ ${politician.office}</div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('politicianModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('politicianModal').classList.add('hidden');
        }

        function searchPoliticians() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            if (!query.trim()) {
                document.getElementById('searchResults').classList.add('hidden');
                return;
            }
            
            const results = samplePoliticians.filter(p => 
                p.name.toLowerCase().includes(query) ||
                p.party.toLowerCase().includes(query) ||
                p.district.toLowerCase().includes(query)
            );
            
            const resultsDiv = document.getElementById('searchResults');
            if (results.length > 0) {
                resultsDiv.innerHTML = results.map(p => `
                    <div class="p-3 hover:bg-gray-50 cursor-pointer border-b last:border-b-0" 
                         onclick="showPoliticianDetail('${p.name}')">
                        <div class="font-medium">${p.name}</div>
                        <div class="text-sm text-gray-500">${p.party} Â· ${p.district}</div>
                    </div>
                `).join('');
                resultsDiv.classList.remove('hidden');
            } else {
                resultsDiv.innerHTML = '<div class="p-3 text-gray-500">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                resultsDiv.classList.remove('hidden');
            }
        }

        function updateLastUpdate() {
            document.getElementById('lastUpdate').textContent = new Date().toLocaleDateString('ko-KR');
        }

        // ê²€ìƒ‰ì°½ ì—”í„°í‚¤ ì²˜ë¦¬
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchPoliticians();
            }
        });

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        document.getElementById('politicianModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
</body>
</html>
